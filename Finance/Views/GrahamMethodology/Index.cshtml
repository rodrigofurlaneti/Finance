@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

    <h1 class="text-center display-4">Fórmula de Benjamin Graham</h1>
    <p>A Fórmula de Benjamin Graham é uma metodologia usada para avaliar se uma ação está subvalorizada, com base nos princípios de investimento em valor. Graham foi um pioneiro no campo do investimento em valor, e sua fórmula é amplamente utilizada por investidores para estimar o valor intrínseco de uma ação.</p>

    <h2>Fórmula de Benjamin Graham</h2>
    <p>A fórmula original de Benjamin Graham para calcular o valor intrínseco de uma ação é:</p>
    <pre>
        V = (EPS * (8.5 + 2g) * 4.4) / Y
    </pre>
    <p>Onde:</p>
    <ul>
        <li><strong>V</strong> = Valor Intrínseco</li>
        <li><strong>EPS</strong> = Lucro por Ação (Earnings Per Share)</li>
        <li><strong>8.5</strong> = Constante representando o múltiplo P/E apropriado para uma empresa sem crescimento</li>
        <li><strong>g</strong> = Taxa de Crescimento esperada dos lucros nos próximos 7-10 anos</li>
        <li><strong>4.4</strong> = Taxa de retorno do título AAA em 1962, quando Graham desenvolveu esta fórmula</li>
        <li><strong>Y</strong> = Taxa de retorno atual do título AAA</li>
    </ul>

    <h2>Versão Simplificada e Atualizada</h2>
    <p>Devido à variação nas taxas de juros ao longo dos anos, muitos investidores usam uma versão simplificada da fórmula de Graham, considerando uma taxa de retorno fixa para simplificação:</p>
    <pre>
        V = EPS * (8.5 + 2g)
    </pre>

    <h2>Passos para Calcular a Fórmula de Graham</h2>
    <ol>
        <li>
            <strong>Identificar o EPS (Lucro por Ação):</strong>
            <p>Verifique o EPS dos últimos 12 meses. Esta informação está disponível nos relatórios financeiros da empresa ou em plataformas financeiras.</p>
        </li>
        <li>
            <strong>Determinar a Taxa de Crescimento (g):</strong>
            <p>Estime a taxa de crescimento anual dos lucros da empresa para os próximos 7-10 anos. Essa estimativa pode ser baseada em análises de mercado, projeções de analistas e desempenho histórico da empresa.</p>
        </li>
        <li>
            <strong>Aplicar a Fórmula:</strong>
            <p>Use os valores de EPS e g na fórmula para calcular o valor intrínseco.</p>
        </li>
    </ol>

    <h2>Exemplo Prático</h2>
    <p>Suponha que você esteja avaliando a empresa XYZ S.A.:</p>
    <ul>
        <li>EPS (Lucro por Ação): R$ 5,00</li>
        <li>Taxa de Crescimento (g): 6% ao ano</li>
    </ul>
    <p>Aplicando a fórmula simplificada de Graham:</p>
    <pre>
        V = 5 * (8.5 + 2 * 6)
        V = 5 * (8.5 + 12)
        V = 5 * 20.5
        V = R$ 102.50
    </pre>
    <p>Isso significa que, de acordo com a fórmula de Graham, o valor intrínseco da ação é R$ 102.50. Se o preço de mercado atual da ação for inferior a esse valor, pode ser considerado subvalorizado e, portanto, uma potencial oportunidade de investimento.</p>

    <h2>Considerações Importantes</h2>
    <ul>
        <li><strong>Estimativas e Projeções:</strong> A precisão das estimativas de crescimento e lucro é crucial. Projeções excessivamente otimistas ou pessimistas podem distorcer o valor intrínseco calculado.</li>
        <li><strong>Contexto do Mercado:</strong> Considere o contexto econômico e setorial ao aplicar a fórmula, pois fatores externos podem impactar significativamente o desempenho futuro da empresa.</li>
        <li><strong>Diversificação:</strong> Mesmo que uma ação pareça subvalorizada, é importante diversificar seus investimentos para mitigar riscos.</li>
    </ul>

    <h2>Referências e Ferramentas Úteis</h2>
    <ul>
        <li><a href="https://www.investopedia.com/terms/b/benjamingraham.asp">Benjamin Graham - Investopedia</a></li>
        <li><a href="https://www.statusinvest.com.br">Aplicação da Fórmula de Graham - Status Invest</a></li>
        <li><a href="https://www.fundamentus.com.br">Relatórios Financeiros - Fundamentus</a></li>
    </ul>

<h5>Taxa de Crescimento (g): 0,95%.</h5>
<h5>Taxa de retorno atual do título (Y): 13,75% ao ano SELIC</h5>

<table id="minhaTabela" class="table table-hover">
    <thead>
        <tr>
            <th id="codigo" name="codigo" scope="col" class="text-center">Código</th>
            <th id="tipo" name="tipo" scope="col" class="text-center">Tipo</th>
            <th id="nome" name="nome" scope="col" class="text-center">Nome</th>
            <th id="yield" name="yield" scope="col" class="text-center">Yield últ. 12 meses(R$)</th>
            <th id="preco" name="preco" scope="col" class="text-center">Preço(R$)</th>
            <th id="annualGrowthRate " name="annualGrowthRate " scope="col" class="text-center">Taxa de Crescimento</th>
            <th id="returnRate" name="returnRate" scope="col" class="text-center">Taxa de retorno atual do título</th>
            <th id="resultado" name="resultado" scope="col" class="text-center">Valor intrínseco da ação</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    <button id="codigo" name="codigo" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Código">
                        @item.Symbol
                    </button>
                </td>
                <td>
                    <button id="tipo" name="tipo" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Código">
                        @item.Kind
                    </button>
                </td>
                <td>
                    <button id="name" name="name" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="@item.Name">
                        @item.Name
                    </button>
                </td>
                <td>
                    <button id="yield" name="yield" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Yield últ. 12 meses(R%)">
                        R$@item.Yield_12m
                    </button>
                </td>
                <td>
                    <button id="price" name="price" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Preço">
                        R$@item.Price
                    </button>
                </td>
                <td>
                    <button id="annualGrowthRate" name="annualGrowthRate" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Taxa de Crescimento">
                        R$@item.AnnualGrowthRate.ToString("F2")
                    </button>
                </td>
                <td>
                    <button id="returnRate" name="returnRate" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Taxa de retorno atual do título SELIC">
                        R$@item.ReturnRate.ToString("F2")%
                    </button>
                </td>

                <td>
                    <button id="result" name="result" type="button" class="btn" data-toggle="tooltip" data-placement="top" title="Valor intrínseco da ação">
                        R$@item.Result.ToString("F2")
                    </button>
                </td>
            </tr>
        }


    </tbody>
</table>
<script>
    function filtrarTabela() {
        var input, filter, table, tr, td, i, j, txtValue;
        input = document.getElementById("filtroInput");
        filter = input.value.toUpperCase();
        table = document.getElementById("minhaTabela");
        tr = table.getElementsByTagName("tr");

        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td");
            for (j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText;
                    if (txtValue.toUpperCase().indexOf(filter) > -1) {
                        tr[i].style.display = "";
                        break;
                    }
                }
            }
        }
    }
</script>